webpackJsonp([29],{"+l6I":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Xxa5"),i=s.n(a),r=s("exGp"),n=s.n(r),c=s("hxP8"),u=s("i84Q"),o=s("R2SV"),l={data:function(){return{cityName:null,cityid:null,inputValue:null,addressList:[],placeHistory:[],historyTitle:!0,result:!1}},created:function(){var t=this;return n()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.cityid=t.$route.params.cityid,e.next=3,t.getCurrentCity();case 3:t.init();case 4:case"end":return e.stop()}},e,t)}))()},computed:{},components:{headerTop:c.a},methods:{init:function(){Object(o.b)("placeHistory")?this.addressList=JSON.parse(Object(o.b)("placeHistory")):this.addressList=[]},nextpage:function(t,e){var s=Object(o.b)("placeHistory"),a=this.addressList[t];if(s){var i=!1;this.placeHistory=JSON.parse(s),this.placeHistory.forEach(function(t){t.geohash===e&&(i=!0)}),i||this.placeHistory.push(a)}else this.placeHistory.push(a);Object(o.d)("placeHistory",this.placeHistory),this.$router.push({path:"/home",query:{geohash:e}})},clearAll:function(){Object(o.c)("placeHistory"),this.init()},submits:function(){var t=this;return n()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.inputValue){e.next=5;break}return e.next=3,t.getSearchAddress();case 3:t.historyTitle=!1,t.result=!t.addressList.length;case 5:case"end":return e.stop()}},e,t)}))()},getCurrentCity:function(){var t=this;return n()(i.a.mark(function e(){var s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.p)(t.cityid);case 2:s=e.sent,t.cityName=s.data.name;case 4:case"end":return e.stop()}},e,t)}))()},getSearchAddress:function(){var t=this;return n()(i.a.mark(function e(){var s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.B)({city_id:t.cityid,keyword:t.inputValue,type:"search"});case 2:s=e.sent,t.addressList=s.data;case 4:case"end":return e.stop()}},e,t)}))()}}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"city-page"},[s("header-Top",{attrs:{"head-title":t.cityName,"gp-back":"true"}},[s("router-link",{staticClass:"chang-city",attrs:{slot:"changecity",to:"/selectLoction"},slot:"changecity"},[t._v("\n      切换城市\n    ")])],1),t._v(" "),s("form",{staticClass:"city-form",on:{submit:function(t){t.preventDefault()}}},[s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],staticClass:"city-input input-style",attrs:{type:"text",name:"search",placeholder:"请输入附近地址",required:""},domProps:{value:t.inputValue},on:{input:function(e){e.target.composing||(t.inputValue=e.target.value)}}})]),t._v(" "),s("div",[s("input",{staticClass:"city-submit input-style",attrs:{type:"submit",name:"submit",value:"提交"},on:{click:t.submits}})])]),t._v(" "),t.historyTitle?s("div",{staticClass:"search-history"},[t._v("\n    搜索历史\n  ")]):t._e(),t._v(" "),s("ul",{staticClass:"addresss-list"},t._l(t.addressList,function(e,a){return s("li",{key:a,on:{click:function(s){t.nextpage(a,e.geohash)}}},[s("h4",{staticClass:"ellipsis address-name"},[t._v(t._s(e.name))]),t._v(" "),s("p",{staticClass:"ellipsis address-location"},[t._v(t._s(e.address))])])})),t._v(" "),t.historyTitle&&t.addressList.length?s("div",{staticClass:"clear-history",on:{click:t.clearAll}},[t._v("\n    清空所有\n  ")]):t._e(),t._v(" "),t.result?s("div",{staticClass:"search-result"},[t._v("\n    很抱歉！暂无搜索结果\n  ")]):t._e()],1)},staticRenderFns:[]},p=s("VU/8")(l,d,!1,function(t){s("xDKP")},"data-v-2d42474f",null);e.default=p.exports},xDKP:function(t,e){}});
//# sourceMappingURL=29.ada76ba20b9989b290a4.js.map