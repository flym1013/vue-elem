{"version":3,"sources":["webpack:///src/page/login/city.vue","webpack:///./src/page/login/city.vue?c1a8","webpack:///./src/page/login/city.vue"],"names":["city","_this","this","getCurrentCity","init","headerTop","header","index","history","choosePlace","placeHistory","_this2","inputValue","getSearchAddress","length","_this3","cityid","name","_this4","data","login_city","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","head-title","cityName","gp-back","slot","to","_v","on","submit","$event","preventDefault","directives","rawName","value","expression","type","placeholder","required","domProps","input","target","composing","click","submits","_e","_l","item","key","nextpage","geohash","_s","address","historyTitle","addressList","clearAll","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"0LAyCAA,mCAIA,YACA,gBACA,kDAGA,UAEA,uBAEA,IAAAC,EAAAC,wJAEAC,0BACAC,6EAKAC,UAAAC,EAAA,gGAIA,+EAMA,mCACAC,QACA,QACA,+BACAC,4DAGA,+BAIAC,+BAGAA,mCAEAC,mGAIA,qBACAN,2BAEA,IAAAO,EAAAT,4GACAU,WAAA,kCACAC,0CACA,0BAEAC,+EAEA,IAAAC,EAAAb,0IACAc,0CACAC,+EAEA,IAAAC,EAAAhB,mJAEAc,iBACAJ,gBAEA,2CACAO,qDC7GAC,GADiBC,OAFjB,WAA0B,IAAAC,EAAApB,KAAaqB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,cAAwBF,EAAA,cAAmBG,OAAOC,aAAAP,EAAAQ,SAAAC,UAAA,UAA4CN,EAAA,eAAoBE,YAAA,aAAAC,OAAgCI,KAAA,aAAAC,GAAA,kBAA0CD,KAAA,eAAmBV,EAAAY,GAAA,4BAAAZ,EAAAY,GAAA,KAAAT,EAAA,QAA4DE,YAAA,YAAAQ,IAA4BC,OAAA,SAAAC,GAA0BA,EAAAC,qBAA2Bb,EAAA,OAAAA,EAAA,SAAwBc,aAAatB,KAAA,QAAAuB,QAAA,UAAAC,MAAAnB,EAAA,WAAAoB,WAAA,eAA8Ef,YAAA,yBAAAC,OAA8Ce,KAAA,OAAA1B,KAAA,SAAA2B,YAAA,UAAAC,SAAA,IAAoEC,UAAWL,MAAAnB,EAAA,YAAyBa,IAAKY,MAAA,SAAAV,GAAyBA,EAAAW,OAAAC,YAAsC3B,EAAAV,WAAAyB,EAAAW,OAAAP,aAAqCnB,EAAAY,GAAA,KAAAT,EAAA,OAAAA,EAAA,SAAsCE,YAAA,0BAAAC,OAA6Ce,KAAA,SAAA1B,KAAA,SAAAwB,MAAA,MAA6CN,IAAKe,MAAA5B,EAAA6B,eAAqB7B,EAAAY,GAAA,KAAAZ,EAAA,aAAAG,EAAA,OAA+CE,YAAA,mBAA6BL,EAAAY,GAAA,oBAAAZ,EAAA8B,KAAA9B,EAAAY,GAAA,KAAAT,EAAA,MAA2DE,YAAA,iBAA4BL,EAAA+B,GAAA/B,EAAA,qBAAAgC,EAAA/C,GAA+C,OAAAkB,EAAA,MAAgB8B,IAAAhD,EAAA4B,IAAce,MAAA,SAAAb,GAAyBf,EAAAkC,SAAAjD,EAAA+C,EAAAG,aAAoChC,EAAA,MAAWE,YAAA,0BAAoCL,EAAAY,GAAAZ,EAAAoC,GAAAJ,EAAArC,SAAAK,EAAAY,GAAA,KAAAT,EAAA,KAAkDE,YAAA,8BAAwCL,EAAAY,GAAAZ,EAAAoC,GAAAJ,EAAAK,iBAAmCrC,EAAAY,GAAA,KAAAZ,EAAAsC,cAAAtC,EAAAuC,YAAA/C,OAAAW,EAAA,OAAoEE,YAAA,gBAAAQ,IAAgCe,MAAA5B,EAAAwC,YAAsBxC,EAAAY,GAAA,oBAAAZ,EAAA8B,KAAA9B,EAAAY,GAAA,KAAAZ,EAAA,OAAAG,EAAA,OAAyEE,YAAA,kBAA4BL,EAAAY,GAAA,0BAAAZ,EAAA8B,MAAA,IAEznDW,oBCejBC,EAdAC,EAAA,OAcAC,CACAlE,EACAoB,GATA,EAVA,SAAA+C,GACAF,EAAA,SAaA,kBAEA,MAUAG,EAAA,QAAAJ,EAAA","file":"static/js/29.ada76ba20b9989b290a4.js","sourcesContent":["<template lang=\"html\">\r\n  <div class=\"city-page\">\r\n    <header-Top :head-title=\"cityName\" gp-back=\"true\">\r\n      <router-link to=\"/selectLoction\" slot=\"changecity\" class=\"chang-city\">\r\n        切换城市\r\n      </router-link>\r\n    </header-Top>\r\n    <form class=\"city-form\" v-on:submit.prevent>\r\n      <!-- v-on:submit.preven 阻止form表单刷新整个页面 -->\r\n      <div>\r\n        <input type=\"text\" name=\"search\" placeholder=\"请输入附近地址\" required v-model=\"inputValue\" class=\"city-input input-style\">\r\n      </div>\r\n      <div>\r\n        <input type=\"submit\" name=\"submit\" value=\"提交\" class=\"city-submit input-style\" @click=\"submits\">\r\n      </div>\r\n    </form>\r\n    <div class=\"search-history\" v-if=\"historyTitle\">\r\n      搜索历史\r\n    </div>\r\n    <ul class=\"addresss-list\">\r\n      <li v-for=\"(item,index) in addressList\" :key=\"index\" @click=\"nextpage(index, item.geohash)\">\r\n        <h4 class=\"ellipsis address-name\">{{item.name}}</h4>\r\n        <p class=\"ellipsis address-location\">{{item.address}}</p>\r\n      </li>\r\n    </ul>\r\n    <div class=\"clear-history\" v-if=\"historyTitle&&addressList.length\" @click=\"clearAll\">\r\n      清空所有\r\n    </div>\r\n    <div class=\"search-result\" v-if=\"result\">\r\n      很抱歉！暂无搜索结果\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport headerTop from '../../components/header/header.vue'\r\nimport {\r\n  getCurrentCity,\r\n  searchAddrress\r\n } from '../../service/getData.js'\r\nimport { getStore, setStore, removeStore } from '../../config/utils.js'\r\nexport default {\r\n  data () {\r\n    return {\r\n      cityName: null,\r\n      cityid: null,\r\n      inputValue: null,\r\n      addressList: [],\r\n      placeHistory: [],\r\n      historyTitle: true,\r\n      result: false\r\n    }\r\n  },\r\n  async created () {\r\n    this.cityid = this.$route.params.cityid // 获取路由信息console.log(this.$route.params.cityid)\r\n    await this.getCurrentCity()\r\n    this.init()\r\n  },\r\n  computed: {},\r\n  components: {\r\n    headerTop\r\n  },\r\n  methods: {\r\n    init () {\r\n      if (getStore('placeHistory')) {\r\n        this.addressList = JSON.parse(getStore('placeHistory'))\r\n      } else {\r\n        this.addressList = []\r\n      }\r\n    },\r\n    nextpage (index, geohash) {\r\n      let history = getStore('placeHistory')\r\n      let choosePlace = this.addressList[index]\r\n      if (history) {\r\n        let checkrepeat = false\r\n        this.placeHistory = JSON.parse(history)\r\n        this.placeHistory.forEach(item => {\r\n          if (item.geohash === geohash) {\r\n            checkrepeat = true\r\n          }\r\n        })\r\n        if (!checkrepeat) {\r\n          this.placeHistory.push(choosePlace)\r\n        }\r\n      } else {\r\n        this.placeHistory.push(choosePlace)\r\n      }\r\n      setStore('placeHistory', this.placeHistory)\r\n      this.$router.push({path: '/home', query: {geohash}})  // 跳转到首页\r\n    },\r\n    clearAll () {\r\n      removeStore('placeHistory')\r\n      this.init()\r\n    },\r\n    async submits () {\r\n      if (this.inputValue) {\r\n        await this.getSearchAddress()\r\n        this.historyTitle = false\r\n        this.result = !this.addressList.length\r\n      }\r\n    },\r\n    async getCurrentCity () {\r\n      let res = await getCurrentCity(this.cityid)\r\n      this.cityName = res.data.name\r\n    },\r\n    async getSearchAddress () {\r\n      let res = await searchAddrress({\r\n        city_id: this.cityid,\r\n        keyword: this.inputValue,\r\n        type: 'search'\r\n      })\r\n      this.addressList = res.data\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../../style/mixin';\r\n.city-page{\r\n  padding-top: 2.35rem;\r\n  p, span{\r\n      font-family: Helvetica Neue,Tahoma,Arial;\r\n  }\r\n}\r\n.chang-city{\r\n  right: .4rem;\r\n  @include sc(.6rem,#fff);\r\n  @include ct;\r\n}\r\n.city-form{\r\n  padding-top: .4rem;\r\n  background-color: #fff;\r\n  border-top: 1px solid $bc;\r\n  border-bottom: 1px solid $bc;\r\n  div{\r\n    width: 90%;\r\n    margin: 0 auto;\r\n    text-align: center;\r\n    .city-input{\r\n      border: 1px solid $bc;\r\n      padding: 0 .3rem;\r\n      @include sc(.65rem,#333);\r\n    }\r\n    .city-submit{\r\n      background-color: $blue;\r\n      @include sc(.65rem,#fff);\r\n    }\r\n    .input-style{\r\n      @include wh(100%,1.4rem);\r\n      margin-bottom: .4rem;\r\n      border-radius: .1rem;\r\n    }\r\n  }\r\n}\r\n.search-history{\r\n  border-top: 1px solid $bc;\r\n  border-bottom: 1px solid $bc;\r\n  padding-left: .5rem;\r\n  @include font(0.475rem, 0.8rem);\r\n  text-align: left;\r\n}\r\n.addresss-list{\r\n  background-color: #fff;\r\n  border-top: 1px solid $bc;\r\n  li{\r\n    margin: 0 auto;\r\n    border-bottom: 1px solid $bc;\r\n    padding-top: .65rem;\r\n    text-align: left;\r\n    .address-name{\r\n      margin: 0 auto .35rem;\r\n      width: 90%;\r\n      @include sc(.65rem,#333);\r\n    }\r\n    .address-location{\r\n      margin: 0 auto .55rem;\r\n      width: 90%;\r\n      @include sc(.45rem,#999);\r\n    }\r\n  }\r\n}\r\n.clear-history{\r\n  @include sc(.7rem,#666);\r\n  text-align: center;\r\n  line-height: 2rem;\r\n  background-color: #fff;\r\n}\r\n.search-result{\r\n  margin: 0 auto;\r\n  @include font(0.65rem, 1.75rem);\r\n  background-color: #fff;\r\n  color: #333;\r\n  text-indent: .5rem;\r\n  text-align: left;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/page/login/city.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"city-page\"},[_c('header-Top',{attrs:{\"head-title\":_vm.cityName,\"gp-back\":\"true\"}},[_c('router-link',{staticClass:\"chang-city\",attrs:{\"slot\":\"changecity\",\"to\":\"/selectLoction\"},slot:\"changecity\"},[_vm._v(\"\\n      切换城市\\n    \")])],1),_vm._v(\" \"),_c('form',{staticClass:\"city-form\",on:{\"submit\":function($event){$event.preventDefault();}}},[_c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.inputValue),expression:\"inputValue\"}],staticClass:\"city-input input-style\",attrs:{\"type\":\"text\",\"name\":\"search\",\"placeholder\":\"请输入附近地址\",\"required\":\"\"},domProps:{\"value\":(_vm.inputValue)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.inputValue=$event.target.value}}})]),_vm._v(\" \"),_c('div',[_c('input',{staticClass:\"city-submit input-style\",attrs:{\"type\":\"submit\",\"name\":\"submit\",\"value\":\"提交\"},on:{\"click\":_vm.submits}})])]),_vm._v(\" \"),(_vm.historyTitle)?_c('div',{staticClass:\"search-history\"},[_vm._v(\"\\n    搜索历史\\n  \")]):_vm._e(),_vm._v(\" \"),_c('ul',{staticClass:\"addresss-list\"},_vm._l((_vm.addressList),function(item,index){return _c('li',{key:index,on:{\"click\":function($event){_vm.nextpage(index, item.geohash)}}},[_c('h4',{staticClass:\"ellipsis address-name\"},[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),_c('p',{staticClass:\"ellipsis address-location\"},[_vm._v(_vm._s(item.address))])])})),_vm._v(\" \"),(_vm.historyTitle&&_vm.addressList.length)?_c('div',{staticClass:\"clear-history\",on:{\"click\":_vm.clearAll}},[_vm._v(\"\\n    清空所有\\n  \")]):_vm._e(),_vm._v(\" \"),(_vm.result)?_c('div',{staticClass:\"search-result\"},[_vm._v(\"\\n    很抱歉！暂无搜索结果\\n  \")]):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2d42474f\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/login/city.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2d42474f\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./city.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./city.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./city.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2d42474f\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./city.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2d42474f\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/login/city.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}